{% extends 'jdm/base.html' %}
{% block content %}
{% load static %}

<h1 id="joueur">{{ ligue.nom }}</h1>
<h3 style="color: #add9ce">{{ ligue.description }}</h3>
{% if not ligue.lancee %}
    <div>(identifiant du cercle de jeu : {{ ligue.id }})</div>
    <div style="padding: 2rem 0 0 0; color: #add9ce">Les inscrits :</div>
    {% for user, compteur, paris_actifs, paris_finis in users %}
    {% if user.id == request.user.id %}
    <a href="{% url 'salle-attente' %}"><div>{{ user.username }}</div></a>

    {% else %}
    <a href="{% url 'salle-user' user.id %}"><div>{{ user.username }}</div></a>
    {% endif %}
    {% endfor %}
{% endif %}

{% if ligue.lancee %}
    {% for user, compteur, paris, score in users %}
     <div class="candidats" style="max-width: 80%;">
         {% if user.id == request.user.id %}
         <a href="{% url 'salle-attente' %}"><div class="bloc" style="width: 200; height: 200;">{{ user.username }}<div>{{ score }}</div></div></a>
         {% else %}
         <a href="{% url 'salle-user' user.id %}"><div class="bloc" style="width: 100; height: 100">{{ user.username }}<div>{{ score }}</div></div></a>
         {% endif %}



         {% for pari in paris %}
            {% for candidat in candidats %}
            {% if candidat.wiki_id == pari.wiki_id %}
                    <div class="alignement">
                    <a href="/candidats/{{ candidat.id }}/">
                    {% if candidat.photo == '' %}
                    <img src="{% static 'jdm/candidat.png' %}" width="100" height="100" alt="{{ candidat.nom }}" class="image"/>
                    {% else %}
                    <img src="https://commons.wikimedia.org/w/index.php?title=Special:Redirect/file/{{ candidat.photo }}&width=300" width="100" height="100" alt="{{ candidat.nom }}" class="image"/>
                    {% endif %}
                        <div class="overlay">
                            <div class="text" style="font-size: 0.7rem;">
                                <p>{{ candidat.nom }}</p>
                                <p>{{ candidat.points }} point{{ candidat.points|pluralize }}</p>
                            </div>
                        </div>
                </a>
            </div>
            {% endif %}
            {% endfor %}
        {% endfor %}
        </div>
    {% endfor %}



    {% if on_continue %}
        <h2>Ajouter un candidat</h2>
        {% if tour %}
            <form action="" method="post" novalidate>
                {% csrf_token %}
                {{ form.as_p }}
                <input type="submit" value="Rechercher">
            </form>
        {% else %}
            <div>En attente des nominations de vos camarades</div>
        {% endif %}
    {% endif %}


{% endif %}


<div style="flex-direction: row; justify-content: center;">
{% if ligue.lancee is False and users|length > 1 %}
    <div style="color: #add9ce; margin: 2rem; background-color: #f89403; border-radius: 15px; width: 15rem; padding: 0.5rem 0.5rem 0.5rem 0.5rem;">
        <a href="{% url 'lancer-ligue' ligue.id %}"><h4 style="padding: 1.5rem 0 0 0">Lancer le jeu</h4></a>
    </div>
{% endif %}

{% if ligue.lancee is False %}
    <div style="color: #add9ce; margin: 2rem; background-color: #f89403; border-radius: 15px; width: 15rem; padding: 0.5rem 0.5rem 0.5rem 0.5rem;">
        <a href="{% url 'quitter-ligue' ligue.id %}"><h4 style="padding: 1.5rem">Quitter le cercle</h4></a>
    </div>
    {% endif %}
</div>

{% endblock %}